def static getVersionQualifier(String branch_name) {
    if(branch_name.startsWith('release'))
        return ''
    // Osgi in 5x accepts - in qualifier, 6x does not.
    // Suggest removing branch section from snapshot qualifiers all together.
    return '.SNAPSHOT'
}

ext {
    versionWithoutQualifier = '4.0.0'

    jackson_version = '2.8.3'
    swagger_version = "1.5.7" // 2.2.4

    http_core_version = "4.3.3"
    http_version = "4.3.4"

    alfresco_61_version = "6.1"
    alfresco_62_version = "6.2"
    alfresco_70_version = "7.0"
    alfresco_71_version = "7.1"
    alfresco_72_version = "7.2"
    alfresco_73_version = "7.3"

    // alfresco-data-model might have a different version number than the main war it's included in
    // ref: https://bitbucket.org/xenit/alfresco-bom/src/master/repo/eu/xenit/alfresco/ for the bom of vanilla alfresco
    alfresco_61_dm_version = "8.25.1"
    alfresco_62_dm_version = "8.50.18"
    alfresco_70_dm_version = "8.424"
    alfresco_71_dm_version = "12.23"
    alfresco_72_dm_version = "14.142"
    alfresco_73_dm_version = "17.175"

    care4alfVersion = '2.3.0'

    mvc = "8.0.0"
    alfrescoVersion = "7.2.0"
}

subprojects {
    apply plugin: 'java'

    group = 'eu.xenit.apix'
    version = versionWithoutQualifier + getVersionQualifier(System.env.BRANCH_NAME ?: 'local')
    sourceCompatibility = 11
    targetCompatibility = 11

    repositories {
        mavenCentral()
        maven { url "https://artifacts.alfresco.com/nexus/content/groups/public" }
        maven { url "https://repo.springsource.org/release" }
        // This private repository provides Xenit with Alfresco enterprise artefacts.
        // External developers should replace it with their own library repository.
        maven {
            name 'Xenit artifactory libs-release'
            url 'https://artifactory.xenit.eu/artifactory/libs-release'
            credentials {
                username property("eu.xenit.artifactory.username")
                password property("eu.xenit.artifactory.password")
            }
        }
    }
}
