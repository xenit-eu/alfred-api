description = 'Xenit API-X Java interface'

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
    repositories {
        maven {
            def releasesRepoUrl = "https://oss.sonatype.org/service/local/staging/deploy/maven2/"
            def snapshotsRepoUrl = "https://oss.sonatype.org/content/repositories/snapshots/"
            url = version.endsWith('SNAPSHOT') ? snapshotsRepoUrl : releasesRepoUrl

            println("=== SUPER DEBUG ===")
            println("version: " + version)
            println("url    : " + url)

            credentials {
                username = project.hasProperty('publish_username') ? project.publish_username : ''
                password = project.hasProperty('publish_password') ? project.publish_password : ''
            }
        }
    }
}

dependencies {
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: jackson_version
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: jackson_version
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: jackson_version
    compile group: 'io.swagger', name: 'swagger-annotations', version: swagger_version
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

task generateJavadocs(type: Javadoc) {
    source = sourceSets.main.allJava
    options.memberLevel = JavadocMemberLevel.PROTECTED
    options.setOutputLevel(JavadocOutputLevel.VERBOSE)
    failOnError = false
}
